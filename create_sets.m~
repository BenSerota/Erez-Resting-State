
clear 
clc

% 
[ALLEEG EEG CURRENTSET ALLCOM] = eeglab;

load gTec_Chanlocs.mat


% creates SETs
for i = 1:12

EEG = pop_importdata('dataformat','matlab','nbchan',0,'data',['/Users/admin/BGU Drive/Graduate_Studies/CPL/EEG_Data/Erez Resting State/EC_no_time/RS' num2str(i) '_no_time.mat'],'srate',256,'pnts',0,'xmin',0);
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 0,'setname',num2str(i),'gui','off'); 
EEG = eeg_checkset( EEG );
EEG = pop_saveset( EEG, 'filename',['RS_EC_S' num2str(i) '.set'],'filepath','/Users/admin/BGU Drive/Graduate_Studies/CPL/EEG_Data/Erez Resting State/EC_no_time/');
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);

% assign electrode locations
EEG.chanlocs = ChanLocs;

% save
EEG = eeg_checkset( EEG );
EEG = pop_saveset( EEG, 'savemode','resave');
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);

end

% only 1 study per RAM
pop_editoptions( 'option_storedisk', 1);

% creates STUDY
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 12,'saveold','/Users/admin/BGU Drive/Graduate_Studies/CPL/EEG_Data/Erez Resting State/EC_no_time/RS_EC_S12.set','gui','off'); 
[STUDY ALLEEG] = std_editset( STUDY, ALLEEG, 'name','Control_subjects','commands',{...
    {'index' 1 'subject' '1' 'condition' 'cntrl'} ...
    {'index' 2 'subject' '2' 'condition' 'cntrl'} ...
    {'index' 3 'subject' '3' 'condition' 'cntrl'} ...
    {'index' 4 'subject' '4' 'condition' 'cntrl'} ...
    {'index' 5 'subject' '5' 'condition' 'cntrl'} ...
    {'index' 6 'subject' '6' 'condition' 'cntrl'} ...
    {'index' 7 'subject' '7' 'condition' 'cntrl'} ...
    {'index' 8 'subject' '8'} ...
    {'index' 9 'subject' '9'} ...
    {'index' 10 'subject' '10'} ...
    {'index' 11 'subject' '11'} ...
    {'index' 12 'subject' '12' 'condition' 'cntrl'} ...
    {'index' 11 'condition' 'cntrl'} ...
    {'index' 2 'condition' 'cntrl'} ...
    {'index' 4 'condition' 'cntrl'} ...
    {'index' 3 'condition' 'cntrl'} ...
    {'index' 5 'condition' 'cntrl'} ...
    {'index' 6 'condition' 'cntrl'} ...
    {'index' 7 'condition' 'cntrl'} ...
    {'index' 8 'condition' 'cntrl'} ...
    {'index' 9 'condition' 'cntrl'} ...
    {'index' 10 'condition' 'cntrl'}...
    },'updatedat','on','savedat','on','rmclust','on' );
[STUDY ALLEEG] = std_checkset(STUDY, ALLEEG);
CURRENTSTUDY = 1; EEG = ALLEEG; CURRENTSET = [1:length(EEG)];
EEG = eeg_checkset( EEG );


